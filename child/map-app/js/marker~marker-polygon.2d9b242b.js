(window["webpackJsonp_map-app"]=window["webpackJsonp_map-app"]||[]).push([["marker~marker-polygon"],{"0a75":function(t,e,n){},"159b":function(t,e,n){var o=n("da84"),i=n("fdbc"),r=n("17c2"),s=n("9112");for(var u in i){var c=o[u],a=c&&c.prototype;if(a&&a.forEach!==r)try{s(a,"forEach",r)}catch(l){a.forEach=r}}},"17c2":function(t,e,n){"use strict";var o=n("b727").forEach,i=n("a640"),r=i("forEach");t.exports=r?[].forEach:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}},"1dde":function(t,e,n){var o=n("d039"),i=n("b622"),r=n("2d00"),s=i("species");t.exports=function(t){return r>=51||!o((function(){var e=[],n=e.constructor={};return n[s]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"4de4":function(t,e,n){"use strict";var o=n("23e7"),i=n("b727").filter,r=n("1dde"),s=r("filter");o({target:"Array",proto:!0,forced:!s},{filter:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},5530:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));n("b64b"),n("a4d3"),n("4de4"),n("e439"),n("159b"),n("dbb4");var o=n("ade3");function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function r(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){Object(o["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}},"7fc3":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var o=n("e11e");n("6cc5"),n("845a"),n("a94e"),n("f246"),n("cfb4");function i(){var t=function(t){return console.log("进入hooks useMap"),e(t)},e=function(t){i();var e=o["map"]("map",{zoom:13,minZoom:10,maxZoom:22,center:t,doubleClickZoom:!1,zoomControl:!1,attributionControl:!1,tap:!1});return s(e),r(e),u(e),e},i=function(){delete o["Icon"].Default.prototype._getIconUrl,o["Icon"].Default.mergeOptions({iconRetinaUrl:n("584d"),iconUrl:n("6397"),shadowUrl:n("e2b9")})},r=function(t){var e=o["tileLayer"]("https://mt{s}.sea.utuapp.cn/610403/satellite/{z}/{x}/{y}.png",{subdomains:["1","2","3","4"]}),n=o["tileLayer"]("https://mt{s}.sea.utuapp.cn/610403/overlay/{z}/{x}/{y}.png",{subdomains:["1","2","3","4"]}),i=o["tileLayer"]("https://mt{s}.sea.utuapp.cn/610403/models/610403102210/{z}/{x}/{y}.png",{subdomains:["1","2","3","4"],minZoom:10,maxZoom:22}),r=o["layerGroup"]([e,n,i]);r.addTo(t)},s=function(t){o["control"].zoom({position:"bottomleft"}).addTo(t)},u=function(t){t.pm.setLang("zh"),t.pm.setPathOptions({color:"orange",fillColor:"green",fillOpacity:.3})},c=function(t,e){console.log(t,"eee"),e.eachLayer((function(e){e.pm&&"Marker"===e.pm._shape&&t.marker._leaflet_id!==e._leaflet_id&&e.remove()}))},a=function(t){t.eachLayer((function(t){t.pm&&"Marker"===t.pm._shape&&t.remove()}))},l=function(t){t.eachLayer((function(t){t.pm&&"Polygon"===t.pm._shape&&t.remove()}))};return{init:t,removeAllMarkers:a,removeHistoryMarkers:c,removePolygon:l}}},8418:function(t,e,n){"use strict";var o=n("c04e"),i=n("9bf2"),r=n("5c6c");t.exports=function(t,e,n){var s=o(e);s in t?i.f(t,s,r(0,n)):t[s]=n}},a640:function(t,e,n){"use strict";var o=n("d039");t.exports=function(t,e){var n=[][t];return!!n&&o((function(){n.call(null,e||function(){throw 1},1)}))}},ade3:function(t,e,n){"use strict";function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return o}))},b0c0:function(t,e,n){var o=n("83ab"),i=n("9bf2").f,r=Function.prototype,s=r.toString,u=/^\s*function ([^ (]*)/,c="name";o&&!(c in r)&&i(r,c,{configurable:!0,get:function(){try{return s.call(this).match(u)[1]}catch(t){return""}}})},b64b:function(t,e,n){var o=n("23e7"),i=n("7b0b"),r=n("df75"),s=n("d039"),u=s((function(){r(1)}));o({target:"Object",stat:!0,forced:u},{keys:function(t){return r(i(t))}})},cfb4:function(t,e,n){},d625:function(t,e,n){"use strict";n.d(e,"a",(function(){return m})),n.d(e,"b",(function(){return f})),n.d(e,"c",(function(){return b})),n.d(e,"d",(function(){return d})),n.d(e,"e",(function(){return v})),n.d(e,"f",(function(){return u}));var o=n("7a23"),i=function(t,e){var n,i=e.arg;if(i){var r=e.value,s=Object(o["s"])(i)?i.value:null===(n=e.instance)||void 0===n?void 0:n.$refs[i];s?"function"===typeof s.addReference?(t.$contextmenuKey=i,s.addReference(t,r)):console.error("".concat(i," 对应的实例不是 VContextmenu")):console.error("没有找到 ".concat(i," 对应的实例"))}else console.error("参数有误")},r=function(t,e){var n,o=t.$contextmenuKey;if(o){var i=null===(n=e.instance)||void 0===n?void 0:n.$refs[o];null===i||void 0===i||i.removeReference(t)}},s=function(t,e){r(t,e),i(t,e)},u={mounted:i,updated:s,beforeUnmount:r},c={contextmenu:"v-contextmenu",contextmenuIcon:"v-contextmenu-icon",contextmenuInner:"v-contextmenu-inner",contextmenuDivider:"v-contextmenu-divider",contextmenuItem:"v-contextmenu-item",contextmenuItemHover:"v-contextmenu-item--hover",contextmenuItemDisabled:"v-contextmenu-item--disabled",contextmenuGroup:"v-contextmenu-group",contextmenuGroupTitle:"v-contextmenu-group__title",contextmenuGroupMenus:"v-contextmenu-group__menus",contextmenuSubmenu:"v-contextmenu-submenu",contextmenuSubmenuTitle:"v-contextmenu-submenu__title",contextmenuSubmenuMenus:"v-contextmenu-submenu__menus",contextmenuSubmenuMenusTop:"v-contextmenu-submenu__menus--top",contextmenuSubmenuMenusRight:"v-contextmenu-submenu__menus--right",contextmenuSubmenuMenusBottom:"v-contextmenu-submenu__menus--bottom",contextmenuSubmenuMenusLeft:"v-contextmenu-submenu__menus--left",contextmenuSubmenuArrow:"v-contextmenu-submenu__arrow"};function a(t){return"function"===typeof t||"[object Object]"===Object.prototype.toString.call(t)&&!Object(o["t"])(t)}var l={trigger:["contextmenu"]},m=Object(o["o"])({name:"VContextmenu",props:{modelValue:{type:Boolean,default:!1},autoAjustPlacement:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},teleport:{type:[String,Object],default:function(){return"body"}}},emits:["show","hide","update:modelValue"],setup:function(t,e){var n=e.emit,i=Object(o["K"])(null),r=Object(o["K"])(t.modelValue||!1),s=function(t){r.value=t,n("update:modelValue",t)},u=Object(o["K"])({top:0,left:0}),c=Object(o["g"])((function(){return{top:"".concat(u.value.top,"px"),left:"".concat(u.value.left,"px")}})),a=Object(o["K"])(null),m=function(e,r){var c,a,l=e instanceof Event?r:e,m=(null===l||void 0===l?void 0:l.autoAjustPlacement)||t.autoAjustPlacement,h={top:(null===l||void 0===l?void 0:l.top)||0,left:(null===l||void 0===l?void 0:l.left)||0};e instanceof Event&&(e.preventDefault(),h.top=null!==(c=null===l||void 0===l?void 0:l.top)&&void 0!==c?c:e.pageY,h.left=null!==(a=null===l||void 0===l?void 0:l.left)&&void 0!==a?a:e.pageX);s(!0),Object(o["v"])((function(){if(m){var t=i.value;if(!t)return;var e=t.clientWidth,o=t.clientHeight;if(o+h.top>=window.innerHeight+window.scrollY){var r=h.top-o;r>window.scrollY&&(h.top=r)}if(e+h.left>=window.innerWidth+window.scrollX){var s=h.left-e;s>window.scrollX&&(h.left=s)}}u.value=h,n("show")}))},h=function(){a.value=null,s(!1),n("hide")},d=Object(o["J"])(new Map),f=Object(o["K"])(),p=Object(o["g"])((function(){return f.value&&d.get(f.value)})),v=function(e,n){var o=function(){return null!==n&&void 0!==n&&n.trigger?Array.isArray(n.trigger)?n.trigger:[n.trigger]:l.trigger}(),i=function(n){t.disabled||(f.value=e,m(n,{}))};o.forEach((function(t){e.addEventListener(t,i)})),d.set(e,{triggers:o,handler:i})},b=function(t){var e=d.get(t);e&&(e.triggers.forEach((function(n){t.removeEventListener(n,e.handler)})),d.delete(t))},x=function(t){if(t.target&&i.value&&f.value){var e=i.value.contains(t.target)||p.value&&p.value.triggers.includes("click")&&f.value.contains(t.target);e||s(!1)}};return Object(o["bb"])(r,(function(t){t?document.addEventListener("click",x):document.removeEventListener("click",x)})),Object(o["y"])((function(){document.removeEventListener("click",x)})),Object(o["G"])("visible",r),Object(o["G"])("autoAjustPlacement",t.autoAjustPlacement),Object(o["G"])("show",m),Object(o["G"])("hide",h),{visible:r,style:c,currentReferenceOptions:p,currentOptions:a,contextmenuRef:i,addReference:v,removeReference:b,toggle:s,show:m,hide:h}},methods:{renderContent:function(){var t,e;return Object(o["eb"])(Object(o["n"])("div",{class:c.contextmenu,ref:"contextmenuRef",style:this.style},[Object(o["n"])("ul",{class:c.contextmenuInner},[null===(t=(e=this.$slots).default)||void 0===t?void 0:t.call(e,{triggerOptions:"currentReferenceOptions",options:"currentOptions"})])]),[[o["ab"],"visible"]])}},render:function(){var t;return this.visible?this.teleport?Object(o["n"])(o["c"],{to:this.teleport},a(t=this.renderContent())?t:{default:function(){return[t]}}):this.renderContent():null}});function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var d=Object(o["o"])({name:"VContextmenuItem",props:{disabled:{type:Boolean,default:!1},hideOnClick:{type:Boolean,default:!0}},emits:["click","mouseenter","mouseleave"],setup:function(t,e){var n=e.emit,i=Object(o["r"])("hide"),r=Object(o["K"])(!1),s=Object(o["g"])((function(){var e;return e={},h(e,c.contextmenuItem,!0),h(e,c.contextmenuItemDisabled,t.disabled),h(e,c.contextmenuItemHover,r.value),e})),u=function(e){t.disabled||(n("click",e),t.hideOnClick&&(null===i||void 0===i||i()))},a=function(e){t.disabled||(r.value=!0,n("mouseenter",e))},l=function(e){t.disabled||(r.value=!1,n("mouseleave",e))};return{classes:s,handleClick:u,handleMouseenter:a,handleMouseleave:l}},render:function(){var t,e;return Object(o["n"])("li",{class:this.classes,onClick:this.handleClick,onMouseenter:this.handleMouseenter,onMouseleave:this.handleMouseleave},[null===(t=(e=this.$slots).default)||void 0===t?void 0:t.call(e)])}}),f=Object(o["o"])({name:"VContextmenuDivider",render:function(){return Object(o["n"])("li",{class:c.contextmenuDivider},null)}}),p=Object(o["o"])({name:"VContextmenuIcon",props:{name:{type:String,required:!0}},render:function(){return Object(o["n"])("i",{class:[c.contextmenuIcon,"".concat(c.contextmenuIcon,"-").concat(this.name)]},null)}}),v=Object(o["o"])({name:"VContextmenuSubmenu",props:{title:{type:String,required:!0},disabled:{type:Boolean,default:!1}},emits:["mouseenter","mouseleave"],setup:function(t,e){var n=e.emit,i=Object(o["K"])(null),r=Object(o["r"])("autoAjustPlacement"),s=Object(o["K"])(["top","right"]),u=Object(o["K"])(!1),a=function(e){t.disabled||(u.value=!0,n("mouseenter",e),Object(o["v"])((function(){var t=[];if(r){var n=e.target,o=n.getBoundingClientRect();if(!i.value)return;var u=i.value.clientWidth,c=i.value.clientHeight;o.right+u>=window.innerWidth?t.push("left"):t.push("right"),o.bottom+c>=window.innerHeight?t.push("bottom"):t.push("top")}s.value=t})))},l=function(e){t.disabled||(u.value=!1,n("mouseleave",e))},m=Object(o["g"])((function(){var e;return e={},h(e,c.contextmenuItem,!0),h(e,c.contextmenuSubmenuTitle,!0),h(e,c.contextmenuItemHover,u.value),h(e,c.contextmenuItemDisabled,t.disabled),e})),d=Object(o["g"])((function(){var t;return t={},h(t,c.contextmenu,!0),h(t,c.contextmenuSubmenuMenus,!0),h(t,c.contextmenuSubmenuMenusTop,s.value.includes("top")),h(t,c.contextmenuSubmenuMenusRight,s.value.includes("right")),h(t,c.contextmenuSubmenuMenusBottom,s.value.includes("bottom")),h(t,c.contextmenuSubmenuMenusLeft,s.value.includes("left")),t}));return{hover:u,submenuRef:i,titleClasses:m,menusClasses:d,handleMouseenter:a,handleMouseleave:l}},render:function(){var t,e,n,i;return Object(o["n"])("li",{class:c.contextmenuSubmenu,onMouseenter:this.handleMouseenter,onMouseleave:this.handleMouseleave},[Object(o["n"])("div",{class:this.titleClasses},[(null===(t=(e=this.$slots).title)||void 0===t?void 0:t.call(e))||this.title,Object(o["n"])("span",{class:c.contextmenuSubmenuArrow},[Object(o["n"])(p,{name:"right-arrow"},null)])]),this.hover?Object(o["n"])("div",{ref:"submenuRef",class:this.menusClasses},[Object(o["n"])("ul",{class:c.contextmenuInner},[null===(n=(i=this.$slots).default)||void 0===n?void 0:n.call(i)])]):null])}}),b=Object(o["o"])({name:"VContextmenuGroup",props:{title:{type:String,default:void 0},maxWidth:{type:[Number,String],default:void 0}},setup:function(t){var e=Object(o["g"])((function(){if(t.maxWidth)return{"max-width":"number"===typeof t.maxWidth?"".concat(t.maxWidth,"px"):t.maxWidth,"overflow-x":"auto"}}));return{style:e}},methods:{renderTitle:function(){var t,e,n=(null===(t=(e=this.$slots).title)||void 0===t?void 0:t.call(e))||this.title;return n?Object(o["n"])("div",{class:c.contextmenuGroupTitle},[n]):null}},render:function(){var t,e;return Object(o["n"])("li",{class:c.contextmenuGroup},[this.renderTitle(),Object(o["n"])("ul",{style:this.style,class:c.contextmenuGroupMenus},[null===(t=(e=this.$slots).default)||void 0===t?void 0:t.call(e)])])}})},dbb4:function(t,e,n){var o=n("23e7"),i=n("83ab"),r=n("56ef"),s=n("fc6a"),u=n("06cf"),c=n("8418");o({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(t){var e,n,o=s(t),i=u.f,a=r(o),l={},m=0;while(a.length>m)n=i(o,e=a[m++]),void 0!==n&&c(l,e,n);return l}})},e439:function(t,e,n){var o=n("23e7"),i=n("d039"),r=n("fc6a"),s=n("06cf").f,u=n("83ab"),c=i((function(){s(1)})),a=!u||c;o({target:"Object",stat:!0,forced:a,sham:!u},{getOwnPropertyDescriptor:function(t,e){return s(r(t),e)}})},f246:function(t,e,n){var o,i,r;
/*
	Leaflet.contextmenu, a context menu for Leaflet.
	(c) 2015, Adam Ratcliffe, GeoSmart Maps Limited

	@preserve
*/(function(s){i=[n("e11e")],o=s,r="function"===typeof o?o.apply(e,i):o,void 0===r||(t.exports=r)})((function(t){t.Map.mergeOptions({contextmenuItems:[]}),t.Map.ContextMenu=t.Handler.extend({_touchstart:t.Browser.msPointer?"MSPointerDown":t.Browser.pointer?"pointerdown":"touchstart",statics:{BASE_CLS:"leaflet-contextmenu"},initialize:function(e){t.Handler.prototype.initialize.call(this,e),this._items=[],this._visible=!1;var n=this._container=t.DomUtil.create("div",t.Map.ContextMenu.BASE_CLS,e._container);n.style.zIndex=1e4,n.style.position="absolute",e.options.contextmenuWidth&&(n.style.width=e.options.contextmenuWidth+"px"),this._createItems(),t.DomEvent.on(n,"click",t.DomEvent.stop).on(n,"mousedown",t.DomEvent.stop).on(n,"dblclick",t.DomEvent.stop).on(n,"contextmenu",t.DomEvent.stop)},addHooks:function(){var e=this._map.getContainer();t.DomEvent.on(e,"mouseleave",this._hide,this).on(document,"keydown",this._onKeyDown,this),t.Browser.touch&&t.DomEvent.on(document,this._touchstart,this._hide,this),this._map.on({contextmenu:this._show,mousedown:this._hide,movestart:this._hide,zoomstart:this._hide},this)},removeHooks:function(){var e=this._map.getContainer();t.DomEvent.off(e,"mouseleave",this._hide,this).off(document,"keydown",this._onKeyDown,this),t.Browser.touch&&t.DomEvent.off(document,this._touchstart,this._hide,this),this._map.off({contextmenu:this._show,mousedown:this._hide,movestart:this._hide,zoomstart:this._hide},this)},showAt:function(e,n){e instanceof t.LatLng&&(e=this._map.latLngToContainerPoint(e)),this._showAtPoint(e,n)},hide:function(){this._hide()},addItem:function(t){return this.insertItem(t)},insertItem:function(t,e){e=void 0!==e?e:this._items.length;var n=this._createItem(this._container,t,e);return this._items.push(n),this._sizeChanged=!0,this._map.fire("contextmenu.additem",{contextmenu:this,el:n.el,index:e}),n.el},removeItem:function(e){var n=this._container;return isNaN(e)||(e=n.children[e]),e?(this._removeItem(t.Util.stamp(e)),this._sizeChanged=!0,this._map.fire("contextmenu.removeitem",{contextmenu:this,el:e}),e):null},removeAllItems:function(){var e,n=this._container.children;while(n.length)e=n[0],this._removeItem(t.Util.stamp(e));return n},hideAllItems:function(){var t,e,n;for(e=0,n=this._items.length;e<n;e++)t=this._items[e],t.el.style.display="none"},showAllItems:function(){var t,e,n;for(e=0,n=this._items.length;e<n;e++)t=this._items[e],t.el.style.display=""},setDisabled:function(e,n){var o=this._container,i=t.Map.ContextMenu.BASE_CLS+"-item";isNaN(e)||(e=o.children[e]),e&&t.DomUtil.hasClass(e,i)&&(n?(t.DomUtil.addClass(e,i+"-disabled"),this._map.fire("contextmenu.disableitem",{contextmenu:this,el:e})):(t.DomUtil.removeClass(e,i+"-disabled"),this._map.fire("contextmenu.enableitem",{contextmenu:this,el:e})))},isVisible:function(){return this._visible},_createItems:function(){var t,e,n=this._map.options.contextmenuItems;for(t=0,e=n.length;t<e;t++)this._items.push(this._createItem(this._container,n[t]))},_createItem:function(e,n,o){if(n.separator||"-"===n)return this._createSeparator(e,o);var i=t.Map.ContextMenu.BASE_CLS+"-item",r=n.disabled?i+" "+i+"-disabled":i,s=this._insertElementAt("a",r,e,o),u=this._createEventHandler(s,n.callback,n.context,n.hideOnSelect),c=this._getIcon(n),a=this._getIconCls(n),l="";return c?l='<img class="'+t.Map.ContextMenu.BASE_CLS+'-icon" src="'+c+'"/>':a&&(l='<span class="'+t.Map.ContextMenu.BASE_CLS+"-icon "+a+'"></span>'),s.innerHTML=l+n.text,s.href="#",t.DomEvent.on(s,"mouseover",this._onItemMouseOver,this).on(s,"mouseout",this._onItemMouseOut,this).on(s,"mousedown",t.DomEvent.stopPropagation).on(s,"click",u),t.Browser.touch&&t.DomEvent.on(s,this._touchstart,t.DomEvent.stopPropagation),t.Browser.pointer||t.DomEvent.on(s,"click",this._onItemMouseOut,this),{id:t.Util.stamp(s),el:s,callback:u}},_removeItem:function(e){var n,o,i,r,s;for(i=0,r=this._items.length;i<r;i++)if(n=this._items[i],n.id===e)return o=n.el,s=n.callback,s&&(t.DomEvent.off(o,"mouseover",this._onItemMouseOver,this).off(o,"mouseover",this._onItemMouseOut,this).off(o,"mousedown",t.DomEvent.stopPropagation).off(o,"click",s),t.Browser.touch&&t.DomEvent.off(o,this._touchstart,t.DomEvent.stopPropagation),t.Browser.pointer||t.DomEvent.on(o,"click",this._onItemMouseOut,this)),this._container.removeChild(o),this._items.splice(i,1),n;return null},_createSeparator:function(e,n){var o=this._insertElementAt("div",t.Map.ContextMenu.BASE_CLS+"-separator",e,n);return{id:t.Util.stamp(o),el:o}},_createEventHandler:function(e,n,o,i){var r=this,s=this._map,u=t.Map.ContextMenu.BASE_CLS+"-item-disabled";i=void 0===i||i;return function(c){t.DomUtil.hasClass(e,u)||(i&&r._hide(),n&&n.call(o||s,r._showLocation),r._map.fire("contextmenu.select",{contextmenu:r,el:e}))}},_insertElementAt:function(t,e,n,o){var i,r=document.createElement(t);return r.className=e,void 0!==o&&(i=n.children[o]),i?n.insertBefore(r,i):n.appendChild(r),r},_show:function(t){this._showAtPoint(t.containerPoint,t)},_showAtPoint:function(e,n){if(this._items.length){var o=this._map,i=o.containerPointToLayerPoint(e),r=o.layerPointToLatLng(i),s=t.extend(n||{},{contextmenu:this});this._showLocation={latlng:r,layerPoint:i,containerPoint:e},n&&n.relatedTarget&&(this._showLocation.relatedTarget=n.relatedTarget),this._setPosition(e),this._visible||(this._container.style.display="block",this._visible=!0),this._map.fire("contextmenu.show",s)}},_hide:function(){this._visible&&(this._visible=!1,this._container.style.display="none",this._map.fire("contextmenu.hide",{contextmenu:this}))},_getIcon:function(e){return t.Browser.retina&&e.retinaIcon||e.icon},_getIconCls:function(e){return t.Browser.retina&&e.retinaIconCls||e.iconCls},_setPosition:function(e){var n,o=this._map.getSize(),i=this._container,r=this._getElementSize(i);this._map.options.contextmenuAnchor&&(n=t.point(this._map.options.contextmenuAnchor),e=e.add(n)),i._leaflet_pos=e,e.x+r.x>o.x?(i.style.left="auto",i.style.right=Math.min(Math.max(o.x-e.x,0),o.x-r.x-1)+"px"):(i.style.left=Math.max(e.x,0)+"px",i.style.right="auto"),e.y+r.y>o.y?(i.style.top="auto",i.style.bottom=Math.min(Math.max(o.y-e.y,0),o.y-r.y-1)+"px"):(i.style.top=Math.max(e.y,0)+"px",i.style.bottom="auto")},_getElementSize:function(t){var e=this._size,n=t.style.display;return e&&!this._sizeChanged||(e={},t.style.left="-999999px",t.style.right="auto",t.style.display="block",e.x=t.offsetWidth,e.y=t.offsetHeight,t.style.left="auto",t.style.display=n,this._sizeChanged=!1),e},_onKeyDown:function(t){var e=t.keyCode;27===e&&this._hide()},_onItemMouseOver:function(e){t.DomUtil.addClass(e.target||e.srcElement,"over")},_onItemMouseOut:function(e){t.DomUtil.removeClass(e.target||e.srcElement,"over")}}),t.Map.addInitHook("addHandler","contextmenu",t.Map.ContextMenu),t.Mixin.ContextMenu={bindContextMenu:function(e){return t.setOptions(this,e),this._initContextMenu(),this},unbindContextMenu:function(){return this.off("contextmenu",this._showContextMenu,this),this},addContextMenuItem:function(t){this.options.contextmenuItems.push(t)},removeContextMenuItemWithIndex:function(t){for(var e=[],n=0;n<this.options.contextmenuItems.length;n++)this.options.contextmenuItems[n].index==t&&e.push(n);var o=e.pop();while(void 0!==o)this.options.contextmenuItems.splice(o,1),o=e.pop()},replaceContextMenuItem:function(t){this.removeContextMenuItemWithIndex(t.index),this.addContextMenuItem(t)},_initContextMenu:function(){this._items=[],this.on("contextmenu",this._showContextMenu,this)},_showContextMenu:function(e){var n,o,i,r,s;if(this._map.contextmenu){for(o=t.extend({relatedTarget:this},e),i=this._map.mouseEventToContainerPoint(e.originalEvent),this.options.contextmenuInheritItems||this._map.contextmenu.hideAllItems(),r=0,s=this.options.contextmenuItems.length;r<s;r++)n=this.options.contextmenuItems[r],this._items.push(this._map.contextmenu.insertItem(n,n.index));this._map.once("contextmenu.hide",this._hideContextMenu,this),this._map.contextmenu.showAt(i,o)}},_hideContextMenu:function(){var t,e;for(t=0,e=this._items.length;t<e;t++)this._map.contextmenu.removeItem(this._items[t]);this._items.length=0,this.options.contextmenuInheritItems||this._map.contextmenu.showAllItems()}};var e,n,o,i=[t.Marker,t.Path],r={contextmenu:!1,contextmenuItems:[],contextmenuInheritItems:!0};for(n=0,o=i.length;n<o;n++)e=i[n],e.prototype.options?e.mergeOptions(r):e.prototype.options=r,e.addInitHook((function(){this.options.contextmenu&&this._initContextMenu()})),e.include(t.Mixin.ContextMenu);return t.Map.ContextMenu}))}}]);