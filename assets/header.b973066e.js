var e=Object.defineProperty,o=Object.prototype.hasOwnProperty,a=Object.getOwnPropertySymbols,s=Object.prototype.propertyIsEnumerable,l=(o,a,s)=>a in o?e(o,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[a]=s,t=(e,t)=>{for(var n in t||(t={}))o.call(t,n)&&l(e,n,t[n]);if(a)for(var n of a(t))s.call(t,n)&&l(e,n,t[n]);return e};import{e as n,g as i,a as d,t as r,p as c,k as m,l as p,m as u,q as g,s as h,F as v,v as b,x as y,z as f,A as V,u as w,f as C,r as I,w as _,i as k,j as x}from"./index.d7a9d022.js";import{l as D}from"./md5.16ed363c.js";import{_ as S}from"./update-password.c867d718.js";import"./vendor.844ce978.js";var O=n({name:"Version",props:{versionDialogVisible:{type:Boolean,default:!1}},emits:["cancel"],setup(e,o){const a=i({visible:e.versionDialogVisible,closeOnClickModal:!1,versions:[]});d((()=>{}));return t(t({},r(a)),{close:()=>{o.emit("cancel")}})}});const j=f();c("data-v-54b7ad88");const L={style:{display:"flex",margin:"20px"}},H={style:{width:"150px"}},M={style:{width:"100px"}},N=V("返回");m();const P=j(((e,o,a,s,l,t)=>{const n=p("el-button"),i=p("el-dialog");return u(),g(i,{title:"版本信息",modelValue:e.visible,"onUpdate:modelValue":o[1]||(o[1]=o=>e.visible=o),width:"400px","close-on-click-modal":e.closeOnClickModal,"append-to-body":!0,onClose:e.close},{footer:j((()=>[h(n,{onClick:e.close},{default:j((()=>[N])),_:1},8,["onClick"])])),default:j((()=>[(u(!0),g(v,null,b(e.versions,(e=>(u(),g("div",L,[h("div",H,y(e.key)+": ",1),h("div",M,y(e.value),1)])))),256))])),_:1},8,["modelValue","close-on-click-modal","onClose"])}));O.render=P,O.__scopeId="data-v-54b7ad88";var U=n({name:"Header",components:{UpdatePassword:S,Version:O},setup(){const{proxy:e}=x(),o=w(),a=C();let s="";const l=localStorage.getItem("token");null!=l&&(s=JSON.parse(l).nickName);const n=I(null),d=i({updateDialogVisible:!1,logoImage:"images/home/icon_logo.png",avatorImage:"images/avator.png",userName:s,versionDialogVisible:!1});d.systemInfo=a.state.currentSystem,d.systemInfo;const c=k.systemList,m=a.getters.headerMenuList,p=()=>{e.$confirm("请问是否退出登录?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{u()})).catch((()=>!1))},u=async()=>{D().then((e=>{200===e.code&&(localStorage.clear(),o.push("/login"))}))};return _((()=>a.state.currentSystem),((e,o)=>{d.systemInfo=e}),{deep:!0}),t(t({},r(d)),{childSystemList:c,changeSystem:e=>{a.commit("changeSystem",e.systemId),d.systemInfo=e,o.push(e.path),console.log(a.state.systemId,"store.state.systemId")},backHome:()=>{o.push("/home")},close:()=>{d.updateDialogVisible=!1},closeVersion:()=>{d.versionDialogVisible=!1},checkLoginOut:p,handleCommand:e=>{"a"===e?d.updateDialogVisible=!0:"c"===e?d.versionDialogVisible=!0:p()},selectMenu:e=>{a.commit("header",e)},headList:m,updateForm:n})}});const B=f();c("data-v-db782d9e");const F={class:"app-header"},T={class:"app-header-left"},q={class:"app-header-title"},z={class:"header-right"},A={class:"common-right"},E=h("span",{class:"color"},[V(" 切换系统"),h("i",{class:"el-icon-arrow-down el-icon--right"})],-1),J={class:"common-right"},$={class:"color"},G=h("i",{class:"el-icon-arrow-down el-icon--right"},null,-1),K=V("修改密码"),Q=V("安全退出"),R=V("版本信息");m();const W=B(((e,o,a,s,l,t)=>{const n=p("el-dropdown-item"),i=p("el-dropdown-menu"),d=p("el-dropdown"),r=p("update-password"),c=p("Version");return u(),g("div",F,[h("div",T,[h("img",{src:e.logoImage,alt:""},null,8,["src"]),h("span",q,y(e.systemInfo.title),1)]),h("div",z,[h("div",{class:"common-right color",onClick:o[1]||(o[1]=(...o)=>e.backHome&&e.backHome(...o))},"返回主页"),h("div",A,[h(d,{onCommand:e.changeSystem},{dropdown:B((()=>[h(i,null,{default:B((()=>[(u(!0),g(v,null,b(e.childSystemList,(e=>(u(),g(n,{command:e},{default:B((()=>[V(y(e.title),1)])),_:2},1032,["command"])))),256))])),_:1})])),default:B((()=>[E])),_:1},8,["onCommand"])]),h("div",J,[h("img",{src:e.avatorImage,alt:"",style:{width:"18.5pt",height:"18.5pt","padding-right":"5px","border-radius":"4px"}},null,8,["src"]),h(d,{onCommand:e.handleCommand},{dropdown:B((()=>[h(i,null,{default:B((()=>[h(n,{command:"a"},{default:B((()=>[K])),_:1}),h(n,{command:"b"},{default:B((()=>[Q])),_:1}),h(n,{command:"c"},{default:B((()=>[R])),_:1})])),_:1})])),default:B((()=>[h("span",$,[V(y(e.userName),1),G])])),_:1},8,["onCommand"])])]),h(r,{modelValue:e.updateDialogVisible,"onUpdate:modelValue":o[2]||(o[2]=o=>e.updateDialogVisible=o),onCancel:e.close},null,8,["modelValue","onCancel"]),h(c,{modelValue:e.versionDialogVisible,"onUpdate:modelValue":o[3]||(o[3]=o=>e.versionDialogVisible=o),onCancel:e.closeVersion},null,8,["modelValue","onCancel"])])}));U.render=W,U.__scopeId="data-v-db782d9e";export default U;
